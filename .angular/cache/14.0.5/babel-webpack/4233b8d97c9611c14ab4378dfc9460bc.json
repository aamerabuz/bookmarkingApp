{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/aamer/Desktop/cambium/bookmarking-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./app-services.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"ngx-cookie-service\";\nexport class AuthService {\n  constructor(http, appService, router, cookieService) {\n    this.http = http;\n    this.appService = appService;\n    this.router = router;\n    this.cookieService = cookieService;\n  }\n\n  loginService(email, password) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      return new Promise((resolve, reject) => {\n        _this.http.post('http://localhost:5000/api/login', {\n          email: email,\n          password: password\n        }, {\n          withCredentials: true\n        }).subscribe(data => {\n          if (data.token) {\n            _this.appService.setMarks(data.marks);\n\n            _this.appService.setCategories(data.categories);\n\n            _this.appService.setTabs(data.tabs);\n\n            _this.appService.settUseId(data.userId);\n\n            _this.cookieService.set('authToken', data.token);\n\n            _this.cookieService.set('userId', data.userId);\n\n            _this.appService.setIsLoginStatus(true);\n\n            _this.router.navigate(['/']);\n\n            resolve(true);\n          } else {\n            _this.appService.setIsLoginStatus(false);\n\n            resolve(false);\n          }\n        });\n      });\n    })();\n  }\n\n  signUpService(email, password) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      // this.http.post('http://localhost:5000/api/login');\n      return new Promise((resolve, reject) => {\n        _this2.http.post('http://localhost:5000/api/signup', {\n          email: email,\n          password: password\n        }, {\n          withCredentials: true\n        }).subscribe(data => {\n          if (data.token) {\n            _this2.appService.setMarks(data.marks);\n\n            _this2.appService.setCategories(data.categories);\n\n            _this2.appService.setTabs(data.tabs);\n\n            _this2.appService.settUseId(data.userId);\n\n            _this2.cookieService.set('authToken', data.token);\n\n            _this2.cookieService.set('userId', data.userId);\n\n            _this2.appService.setIsLoginStatus(true);\n\n            _this2.router.navigate(['/']);\n\n            resolve(true);\n          } else {\n            _this2.appService.setIsLoginStatus(false);\n\n            resolve(false);\n          }\n        });\n      });\n    })();\n  }\n\n}\n\nAuthService.ɵfac = function AuthService_Factory(t) {\n  return new (t || AuthService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.AppServicesService), i0.ɵɵinject(i3.Router), i0.ɵɵinject(i4.CookieService));\n};\n\nAuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthService,\n  factory: AuthService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"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","names":["AuthService","constructor","http","appService","router","cookieService","loginService","email","password","Promise","resolve","reject","post","withCredentials","subscribe","data","token","setMarks","marks","setCategories","categories","setTabs","tabs","settUseId","userId","set","setIsLoginStatus","navigate","signUpService","i0","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\aamer\\Desktop\\cambium\\bookmarking-app\\src\\app\\services\\auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { AppServicesService } from './app-services.service';\nimport { Router } from '@angular/router';\nimport { CookieService } from 'ngx-cookie-service'\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n  constructor(\n    private http: HttpClient,\n    private appService: AppServicesService,\n    private router: Router,\n    private cookieService: CookieService\n\n  ) { }\n\n  async loginService(email: string, password: string): Promise<any> {\n    return new Promise((resolve, reject) => {\n      this.http.post('http://localhost:5000/api/login',\n        {\n          email: email,\n          password: password\n        },\n        {\n          withCredentials: true\n        }).subscribe((data: any) => {\n          if (data.token) {\n            this.appService.setMarks(data.marks)\n            this.appService.setCategories(data.categories)\n            this.appService.setTabs(data.tabs)\n            this.appService.settUseId(data.userId)\n            this.cookieService.set('authToken', data.token)\n            this.cookieService.set('userId', data.userId)\n            this.appService.setIsLoginStatus(true)\n            this.router.navigate(['/'])\n            resolve(true)\n          } else {\n            this.appService.setIsLoginStatus(false)\n            resolve(false)\n          }\n        })\n    })\n  }\n\n  async signUpService(email: string, password: string) : Promise<any> {\n    // this.http.post('http://localhost:5000/api/login');\n    return new Promise((resolve,reject) => {\n      this.http.post('http://localhost:5000/api/signup',\n        {\n          email: email,\n          password: password\n        },\n        {\n          withCredentials: true\n        }).subscribe((data : any) => {\n          if (data.token) {\n            this.appService.setMarks(data.marks)\n            this.appService.setCategories(data.categories)\n            this.appService.setTabs(data.tabs)\n            this.appService.settUseId(data.userId)\n            this.cookieService.set('authToken', data.token)\n            this.cookieService.set('userId', data.userId)\n            this.appService.setIsLoginStatus(true)\n            this.router.navigate(['/'])\n            resolve(true)\n          } else {\n            this.appService.setIsLoginStatus(false)\n            resolve(false)\n          }\n        })\n    })\n  }\n\n\n\n}\n"]},"metadata":{},"sourceType":"module"}