{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/aamer/Desktop/cambium/bookmarking-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./app-services.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"ngx-cookie-service\";\nexport class AuthService {\n  constructor(http, appService, router, cookieService) {\n    this.http = http;\n    this.appService = appService;\n    this.router = router;\n    this.cookieService = cookieService;\n  }\n\n  loginService(email, password) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      // this.http.post('http://localhost:5000/api/login');\n      let status;\n      return new Promise((resolve, reject) => {\n        _this.http.post('http://localhost:5000/api/login', {\n          email: email,\n          password: password\n        }, {\n          withCredentials: true\n        }).subscribe(data => {\n          console.log('log in data');\n\n          if (data.token) {\n            _this.appService.setMarks(data.marks);\n\n            _this.appService.setCategories(data.categories);\n\n            _this.appService.setTabs(data.tabs);\n\n            _this.appService.settUseId(data.userId);\n\n            _this.cookieService.set('authToken', data.token);\n\n            _this.appService.setIsLoginStatus(true);\n\n            _this.router.navigate(['/']);\n\n            resolve(true);\n          } else {\n            _this.appService.setIsLoginStatus(false);\n\n            resolve(false);\n          }\n        });\n      });\n    })();\n  }\n\n  signUpService(email, password) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      // this.http.post('http://localhost:5000/api/login');\n      return new Promise((resolve, reject) => {\n        _this2.http.post('http://localhost:5000/api/signup', {\n          email: email,\n          password: password\n        }, {\n          withCredentials: true\n        }).subscribe(data => {\n          if (data.token) {\n            _this2.appService.setMarks(data.marks);\n\n            _this2.appService.setCategories(data.categories);\n\n            _this2.appService.setTabs(data.tabs);\n\n            _this2.appService.settUseId(data.userId);\n\n            _this2.cookieService.set('authToken', data.token);\n\n            _this2.appService.setIsLoginStatus(true);\n\n            _this2.router.navigate(['/']);\n\n            resolve(true);\n          } else {\n            _this2.appService.setIsLoginStatus(false);\n\n            resolve(false);\n          }\n        });\n      });\n    })();\n  }\n\n}\n\nAuthService.ɵfac = function AuthService_Factory(t) {\n  return new (t || AuthService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.AppServicesService), i0.ɵɵinject(i3.Router), i0.ɵɵinject(i4.CookieService));\n};\n\nAuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthService,\n  factory: AuthService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"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","names":["AuthService","constructor","http","appService","router","cookieService","loginService","email","password","status","Promise","resolve","reject","post","withCredentials","subscribe","data","console","log","token","setMarks","marks","setCategories","categories","setTabs","tabs","settUseId","userId","set","setIsLoginStatus","navigate","signUpService","i0","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\aamer\\Desktop\\cambium\\bookmarking-app\\src\\app\\services\\auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { AppServicesService } from './app-services.service';\nimport { Router } from '@angular/router';\nimport { CookieService } from 'ngx-cookie-service'\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n\n\n\n  constructor(\n    private http: HttpClient,\n    private appService: AppServicesService,\n    private router: Router,\n    private cookieService: CookieService\n\n  ) { }\n\n  async loginService(email: string, password: string): Promise<any> {\n    // this.http.post('http://localhost:5000/api/login');\n    let status;\n    return new Promise((resolve, reject) => {\n      this.http.post('http://localhost:5000/api/login',\n        {\n          email: email,\n          password: password\n        },\n        {\n          withCredentials: true\n        }).subscribe((data: any) => {\n          console.log('log in data')\n          if (data.token) {\n            this.appService.setMarks(data.marks)\n            this.appService.setCategories(data.categories)\n            this.appService.setTabs(data.tabs)\n            this.appService.settUseId(data.userId)\n            this.cookieService.set('authToken', data.token)\n            this.appService.setIsLoginStatus(true)\n            this.router.navigate(['/'])\n            resolve(true)\n          } else {\n            this.appService.setIsLoginStatus(false)\n            resolve(false)\n          }\n        })\n    })\n  }\n\n  async signUpService(email: string, password: string) : Promise<any> {\n    // this.http.post('http://localhost:5000/api/login');\n    return new Promise((resolve,reject) => {\n      this.http.post('http://localhost:5000/api/signup',\n        {\n          email: email,\n          password: password\n        },\n        {\n          withCredentials: true\n        }).subscribe((data : any) => {\n          if (data.token) {\n            this.appService.setMarks(data.marks)\n            this.appService.setCategories(data.categories)\n            this.appService.setTabs(data.tabs)\n            this.appService.settUseId(data.userId)\n            this.cookieService.set('authToken', data.token)\n            this.appService.setIsLoginStatus(true)\n            this.router.navigate(['/'])\n            resolve(true)\n          } else {\n            this.appService.setIsLoginStatus(false)\n            resolve(false)\n          }\n        })\n    })\n  }\n\n\n\n}\n"]},"metadata":{},"sourceType":"module"}